<h1 class="text-2xl mb-2">
  {{ oldInvoice ? 'Update Invoice for ID ' + invoiceId : 'Create Invoice' }}
</h1>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="rounded-md bg-gray-50 p-4 md:p-6">
    <!-- Customer Name -->
    <div class="mb-4">
      <label for="customer" class="mb-2 block text-sm font-medium">
        {{ oldInvoice ? 'Customer' : 'Choose customer' }}
      </label>
      <div class="relative">
        <select
          id="customer"
          formControlName="customer_id"
          class="peer block w-full cursor-pointer rounded-md border border-gray-200 py-2 pl-10 text-sm outline-2 placeholder:text-gray-500">
          <option value="" disabled>
            Select a customer
          </option>
          @for (customer of customers; track customer) {
            <option value={{customer.id}}
              [selected]="selected(customer.id)">
              {{customer.name}}
            </option>
          }
        </select>
        <span class="material-symbols-outlined pointer-events-none absolute left-3 top-1/3 h-[18px] w-[18px] -translate-y-1/2 text-gray-500">
          person
        </span>
      </div>
      @if (customer?.touched && customer?.invalid) {
        <p class="mt-2 text-sm text-red-500">
          @if (customer?.errors?.['required']) {
            <span>Please select a customer. </span>
          }
        </p>
      }
    </div>

    <!-- Invoice Amount -->
    <div class="mb-4">
      <label for="amount" class="mb-2 block text-sm font-medium">
        Enter an amount
      </label>
      <div class="relative mt-2 rounded-md">
        <div class="relative">
          <input
            id="amount"
            formControlName="amount"
            type="number"
            placeholder="Enter USD amount"
            class="peer block w-full rounded-md border border-gray-200 py-2 pl-10 text-sm outline-2 placeholder:text-gray-500"
            required>
          <span class="material-symbols-outlined pointer-events-none absolute left-3 top-1/3 h-[18px] w-[18px] -translate-y-1/2 text-gray-500 peer-focus:text-gray-900">
            attach_money
          </span>
        </div>
        @if (amount?.touched && amount?.invalid) {
          <p class="mt-2 text-sm text-red-500">
            @if (amount?.errors?.['required']) {
              <span>Amount is required. </span>
            }
            @if (amount?.errors?.['minZero']) {
              <span>Please enter a number > 0.</span>
            }
          </p>
        }
      </div>
    </div>

    <!-- Invoice Status -->
    <fieldset>
      <legend class="mb-2 block text-sm font-medium">
        Set the invoice status
      </legend>
      <div class="rounded-md border border-gray-200 bg-white px-[14px] py-3">
        <div class="flex gap-4">
          <div class="flex items-center">
            <input
              id="pending"
              formControlName="status"
              type="radio"
              value="pending"
              checked="status === 'pending' ? 'checked'"
              class="h-4 w-4 cursor-pointer border-gray-300 bg-gray-100 text-gray-600 focus:ring-2"
              />
            <label
              for="pending"
              class="ml-2 flex cursor-pointer items-center gap-1.5 rounded-full bg-gray-100 px-3 py-1.5 text-xs font-medium text-gray-600">
              Pending <!--ClockIcon class="h-4 w-4" /-->
            </label>
          </div>
          <div class="flex items-center">
            <input
              id="paid"
              formControlName="status"
              type="radio"
              value="paid"
              checked="status === 'paid' ? 'checked'"
              class="h-4 w-4 cursor-pointer border-gray-300 bg-gray-100 text-gray-600 focus:ring-2"
              />
            <label
              for="paid"
              class="ml-2 flex cursor-pointer items-center gap-1.5 rounded-full bg-green-500 px-3 py-1.5 text-xs font-medium text-white">
              Paid <!--CheckIcon class="h-4 w-4" /-->
            </label>
          </div>
        </div>
      </div>
      @if (status?.touched && status?.invalid) {
        <p class="mt-2 text-sm text-red-500">
          @if (status?.errors?.['required']) {
            <span>Please set a status. </span>
          }
        </p>
      }
    </fieldset>
  </div>
  <div class="mt-6 flex justify-end gap-4">
    <a (click)="cancel()"
      class="flex h-10 items-center rounded-lg bg-gray-100 px-4 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200">
      Cancel
    </a>
    <button class="flex h-10 items-center rounded-lg bg-blue-500 px-4 text-sm font-medium text-white transition-colors hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 active:bg-blue-600 aria-disabled:cursor-not-allowed aria-disabled:opacity-50 disabled:bg-gray-200"
      [disabled]="form.invalid">
      {{ oldInvoice ? 'Update Invoice' : 'Create Invoice' }}
    </button>
  </div>
</form>